#!/bin/sh
#------------------------------------------------------------------------------
#  Projekt  : CLICC - a Common Lisp to C Compiler
#             -----------------------------------
#  Function : Compiles one ore more C files which are generated by
#             CLiCC as parts of a Lisp programm.
#  
#  $Source: /home3/apply/public/clicc-0.6.4/bin/RCS/cl-s,v $
#  $Author: uho $
#  $Revision: 1.1 $
#  $Date: 1994/02/21 13:42:51 $
#------------------------------------------------------------------------------

first=$1
shift

as=`which as | tail -1`
if [ "$as" != "/usr/lang/as" ]; then
  echo To produce a shared executable you must use the original
  echo assembler /usr/lang/as and not $as.
  exit 1
fi 

gmake -f $CLICCROOT/lib/makefile.cl "SOURCE=$first" MODULES="$*" \
   "OPTIMIZE=-O -fPIC"\
   "CC=gcc"  "RTC=$CLICCROOT/lib/librtc.so" "RTL=$CLICCROOT/lib/librtl.so" \
   "LINK.c=gcc"
